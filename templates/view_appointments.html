{% extends "base.html" %}
{% block title %}All Appointments{% endblock %}

{% block content %}
<h3 class="mb-3">All Appointments</h3>
<table class="table table-striped table-sm">
  <thead>
    <tr>
      <th>#</th>
      <th>Date</th>
      <th>Time</th>
      <th>Doctor</th>
      <th>Patient</th>
      <th>Status</th>
      <th>Reason</th>
      <th>Actions</th>
    </tr>
  </thead>
  <tbody>
  {% for a in appointments %}
  <tr>
    <td>{{ a.id }}</td>
    <td>{{ a.date }}</td>
    <td>{{ a.time.strftime('%H:%M') }}</td>
    <td>{{ a.doctor.name }}</td>
    <td>{{ a.patient.name }}</td>
    <td>{{ a.status }}</td>
    <td>{{ a.reason }}</td>
    <td>
      {% if a.status == 'Booked' %}
      <a href="{{ url_for('admin_complete_appointment', appointment_id=a.id) }}"
         class="btn btn-sm btn-outline-success">
        Complete
      </a>
      <a href="{{ url_for('admin_cancel_appointment', appointment_id=a.id) }}"
         class="btn btn-sm btn-outline-danger ms-1">
        Cancel
      </a>
      {% else %}
      <span class="text-muted">No actions</span>
      {% endif %}
    </td>
  </tr>
  {% else %}
  <tr><td colspan="7" class="text-center">No appointments</td></tr>
  {% endfor %}
</tbody>

</table>
<a href="{{ url_for('admin_dashboard') }}" class="btn btn-secondary">Back</a>
{% endblock %}
